<!-- *************** Input Node *************** -->
<script type="text/javascript">
    RED.nodes.registerType('openhab-input', {
        category: 'input',
        color: '#a6bbcf',
        defaults: {
            name: {
                value: ""
            },
            server: {
                type: "openhab-server",
                required: true
            },
        },
        inputs: 0,
        outputs: 1,
        icon: "bridge.png",
        label: function() {
            return this.name || "openhab-input";
        },
        oneditprepare: function() {
            alert('foo');
            //     $("#node-input-server").change(function() {
            //         var selectedServernodeId = $(this).val();
            //         var servernode = RED.nodes.get(selectedServernodeId);
            //         alert(servernode);
            //         /*
            //             $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback', function(data) {
            //   //data is the JSON string
            // });
            // */
        //});

    }
    });
</script>

<script type="text/x-red" data-template-name="openhab-input">
    <div class="form-row">
        <label for="node-input-server"><i class="icon-tag"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="openhab-input">
    <p>A node that listens for state changes on openhab items</p>
</script>


<!-- *************** Output State Node *************** -->
<!--
<script type="text/javascript">
    RED.nodes.registerType('openhab-output-state',{
        category: 'output',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            server: {type:"openhab-server", required:true},
        },
        inputs:1,
        outputs:0,
        icon: "bridge.png",
        label: function() {
            return this.name||"openhab-output-state";
        }
    });
</script>

<script type="text/x-red" data-template-name="openhab-output-state">
<div class="form-row">
    <label for="node-input-server"><i class="icon-tag"></i> Server</label>
    <input type="text" id="node-input-server">
</div>
<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="openhab-input">
    <p>A node that listens for state changes on openha bitems</p>
</script>
-->



<!-- *************** Server Node *************** -->
<script type="text/javascript">
    RED.nodes.registerType('openhab-server', {
        category: 'config',
        defaults: {
            url: {
                value: null,
                required: true,
                validate: RED.validators.regex("https?://.+/rest/")
            },
            name: {
                value: null,
                required: false
            }
        },
        label: function() {
            return this.name || Â this.url;
        }
    });
</script>

<script type="text/x-red" data-template-name="openhab-server">
    <div class="form-row">
        <label for="node-config-input-name"><i class="icon-bookmark"></i> Name</label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-url"><i class="icon-bookmark"></i> URL</label>
        <input type="text" id="node-config-input-url">
    </div>


</script>
